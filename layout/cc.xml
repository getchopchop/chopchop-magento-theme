<?xml version="1.0"?>
<layout>

    <cc_drawer>
        
        <!-- Drawers/Modals -->
        <reference name="before_body_end">
            <block type="core/text_list" name="drawers">

                <!-- Left -->
                <block type="core/template" name="drawer.left.html" template="cc/drawer/left.phtml">
                    <block type="core/text_list" name="drawer.left" as="drawer_left" />
                </block>

                <!-- Right -->
                <block type="core/template" name="drawer.right.html" template="cc/drawer/right.phtml">
                    <block type="core/text_list" name="drawer.right" as="drawer_right" />
                </block>

                <!-- Modal -->
                <block type="core/template" name="modal.html" template="cc/drawer/modal.phtml">
                    <block type="core/text_list" name="modal" as="modal" />
                </block>

                <!-- Overlay -->
                <block type="core/template" name="overlay.html" template="cc/drawer/overlay.phtml" />

            </block>
        </reference>
    </cc_drawer>

    <cc_head>
        <reference name="head">
            <!-- meta viewport tag -->
            <block type="core/text" name="viewport.meta">
                <action method="setText">
                    <text><![CDATA[
<meta name="viewport" content="minimal-ui, width=device-width, initial-scale=1, user-scalable=no">
                    ]]></text>
                </action>
            </block>

            <!-- Remove Magento Assets -->
            <action method="removeItem"><type>skin_css</type><name>css/widgets.css</name></action>
            <action method="removeItem"><type>skin_js</type><name>js/ie6.js</name></action>
            <action method="removeItem"><type>js</type><name>lib/ds-sleight.js</name></action>
            <action method="removeItem"><type>skin_css</type><name>css/styles.css</name></action>
            <action method="removeItem"><type>skin_css</type><name>css/styles-ie.css</name></action>
            <action method="removeItem"><type>skin_css</type><name>css/print.css</name></action>

            <!-- Remove Module Assets -->
            <action method="removeItem"><type>skin_css</type><name>css/iwebelasticsearch/autocomplete.css</name></action>

            <!-- ADD Build CSS -->
            <action method="addItem"><type>skin_css</type><name>build/vendor/normalize.css/normalize.css</name></action>
            <action method="addItem"><type>skin_css</type><name>build/css/styles.css</name></action>
            <action method="addItem"><type>skin_js</type><name>build/vendor/picturefill/picturefill.js</name></action>
            <!-- <action method="addItem"><type>skin_js</type><name>build/vendor/lazysizes/lazysizes.js</name></action> -->

            <!-- ADD Build JS -->
            <action method="addItem"><type>skin_js</type><name>build/vendor/enquire/enquire.js</name></action>
            <action method="addItem"><type>skin_js</type><name>build/vendor/svgxuse/svgxuse.js</name></action>
            <action method="addItem"><type>skin_js</type><name>build/vendor/svg4everybody/svg4everybody.js</name><params/><if>lt IE 9</if></action>
            <block type="core/text" name="run.svg4everybody">
                <action method="setText">
                    <text><![CDATA[
<!--[if IE 9]>
<script>svg4everybody(); // run it now or whenever you are ready</script>
<![endif]-->
                        ]]></text>
                </action>
            </block>
            <action method="addItem"><type>skin_js</type><name>build/js/chopchop.lib.js</name></action>
            <action method="addItem"><type>skin_js</type><name>build/js/breakpoints.js</name></action>
            <action method="addItem"><type>skin_js</type><name>build/js/script.js</name></action>
            
            <action method="addItem"><type>skin_js</type><name>build/vendor/iweb/Iweb_QtyWidget.js</name></action>

        </reference>
    </cc_head>

    <cms_index_index>
        <action block="iweb.root.proxy" method="addBodyClass"><classname>template</classname></action>
        <action block="iweb.root.proxy" method="addBodyClass"><classname>template-homepage</classname></action>
    </cms_index_index>

    <catalog_category_view>
        <action block="iweb.root.proxy" method="addBodyClass"><classname>template</classname></action>
        <action block="iweb.root.proxy" method="addBodyClass"><classname>template-product-listing</classname></action>
    </catalog_category_view>

    <catalog_product_view>
        <action block="iweb.root.proxy" method="addBodyClass"><classname>template</classname></action>
        <action block="iweb.root.proxy" method="addBodyClass"><classname>template-product-information</classname></action>
    </catalog_product_view>

    <checkout_cart_index>
        <action block="iweb.root.proxy" method="addBodyClass"><classname>template</classname></action>
        <action block="iweb.root.proxy" method="addBodyClass"><classname>template-basket</classname></action>
    </checkout_cart_index>

    <checkout_onepage_index>
        <action block="iweb.root.proxy" method="addBodyClass"><classname>template</classname></action>
        <action block="iweb.root.proxy" method="addBodyClass"><classname>template-checkout</classname></action>
    </checkout_onepage_index>

    <checkout_onepage_success>
        <action block="iweb.root.proxy" method="addBodyClass"><classname>template</classname></action>
        <action block="iweb.root.proxy" method="addBodyClass"><classname>template-checkout</classname></action>
    </checkout_onepage_success>

    <customer_account_create>
        <action block="root" method="setContainerClass"><classname>u-container u-container--sm</classname></action>
    </customer_account_create>

    <customer_account_forgotpassword>
        <action block="root" method="setContainerClass"><classname>u-container u-container--sm</classname></action>
    </customer_account_forgotpassword>

    <sales_order_history>
        <action block="my.account.wrapper" method="unsetChild"><name>customer.account.link.back</name></action>
    </sales_order_history>

    <iweb_customer_account>
        <action block="iweb.root.proxy" method="addBodyClass"><classname>template</classname></action>
        <action block="iweb.root.proxy" method="addBodyClass"><classname>template-account</classname></action>
    </iweb_customer_account>

</layout>